<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SMU 헬스장 | 로그인</title>
<link rel="icon" href="images/logo_image.png">
<link rel="stylesheet" type="text/css" href="style-size.css"/>
<link rel="stylesheet" type="text/css" href="style-layout.css"/>
<link rel="stylesheet" type="text/css" href="style-presentation.css"/>
<script type="text/javascript" src="loginStatus.js"></script>
<script type="text/javascript">
    // 회원가입 버튼 클릭시
    function redirectToRegister() {
        window.location.href = 'register.html';
    }
    // 로그인 기능
    function loginUser(){
        event.preventDefault(); // 폼의 기본 제출 동작 방지
        var userid = document.getElementById('userid').value;
        var password = document.getElementById('password').value;

        // localStorage에서 사용자 정보 가져오기
        var userInfoString = localStorage.getItem(userid);

        if (userInfoString) {
            // JSON 문자열을 객체로 변환합니다.
            var userInfo = JSON.parse(userInfoString);

            // 비밀번호가 일치하는지 확인합니다.
            if(userInfo.password === password) {
                // 비밀번호가 일치하면 세션 스토리지에 사용자 아이디를 저장하고 마이페이지로 리디렉션합니다.
                sessionStorage.setItem('currentUser', userid);
                window.location.href = 'mypage.html';
            } else {
                // 비밀번호가 일치하지 않을 경우
                alert('로그인 실패: 비밀번호가 잘못되었습니다.');
            }
        } else {
            // 사용자 정보가 없을 경우
            alert('로그인 실패: 존재하지 않는 아이디입니다.');
        }
    }
</script>
</head>
<body>
    <div class="menu_bar">
        <a href="main.html"><img src="images/sum_logo_menu.png" alt="SMU LOGO"/></a>
        <ul>
            <li class="dropdown"><a href="introduce.html">헬스장 소개</a>
                <div class="dropdown-content">
                    <a href="introduce_location.html">위치 및 정보</a>
                    <a href="introduce_calender.html">운영시간</a>
                    <a href="introduce_trainers.html">트레이너 소개</a>
                </div>
            </li>
            <li><a href="notice.html">공지사항</a></li>
            <li><a href="health.html">운동 기구 소개</a> </li>
            <li><a href="service_center.html">고객센터</a></li>
        </ul>
        <span>
            <a href="login.html" id="loginLink">로그인</a>
            /
            <a href="mypage.html">마이페이지</a>
        </span>
    </div>
    <div class="login">
        <img id="smu_kor_img" src="images/SMU_kor.png">
        <p>LOG IN</p>
        <form>    
            <fieldset>
                <input id="userid" type="text" placeholder=" ID"/><br/>
                <input id="password" type="password"  placeholder=" password"><br/>
                <span></span>
                <div class="button">
                <input id="login_button" type="submit" value="로그인" onclick="loginUser(event);"/>
                <input id="register" type="button" value="회원가입" onclick="redirectToRegister();"/>
                </div>
            </fieldset>
        </form> 
    </div>
    <div id="login_bottom">
        <p>
        서울 캠퍼스 : 02-2287-5114 <br>
        서울시 종로구 홍지문 2길 20 상명대학교 (03016)<br> <br>
        천안 캠퍼스 : 041-550-5114 <br>
        충청남도 천안시 동남구 상명대길 31 상명대학교 (31066)<br> <br>
        COPYRIGHT BY SANGMYUNG UNIVERSITY. ALL RIGHTS RESERVED.
        </p>
        <img src="images/sumung_3-removebg-preview.png">
    </div>
</body>
</html>